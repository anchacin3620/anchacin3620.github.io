<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investigación: Difracción Lunar en Eclipses Solares</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #1a252f;
            --success: #27ae60;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: var(--light);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(25, 40, 65, 0.85);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        header {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></svg>');
            background-size: 40px 40px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }
        
        .investigator {
            margin-top: 20px;
            font-style: italic;
            font-size: 1.1rem;
            position: relative;
        }
        
        .investigator strong {
            color: var(--accent);
        }
        
        .tabs {
            display: flex;
            background: var(--dark);
            border-bottom: 2px solid var(--secondary);
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tab:hover, .tab.active {
            background: var(--secondary);
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(52, 152, 219, 0.3);
            font-size: 2rem;
        }
        
        h3 {
            color: var(--accent);
            margin: 25px 0 15px;
            font-size: 1.5rem;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        ul, ol {
            margin: 15px 0 15px 30px;
        }
        
        li {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .card {
            background: rgba(30, 50, 80, 0.7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .card h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-x: auto;
            border-left: 4px solid var(--accent);
        }
        
        .math-equation {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .simulation-container {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        button {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        
        canvas {
            background: black;
            border-radius: 8px;
            max-width: 100%;
        }
        
        .timeline {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }
        
        .timeline::before {
            content: "";
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--secondary);
            z-index: 1;
        }
        
        .timeline-item {
            text-align: center;
            z-index: 2;
            width: 24%;
        }
        
        .timeline-dot {
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            margin: 0 auto 10px;
            position: relative;
        }
        
        .timeline-dot::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            opacity: 0.5;
        }
        
        .timeline-date {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: var(--dark);
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .logo {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1 0 50%;
            }
            
            .card-container {
                grid-template-columns: 1fr;
            }
            
            .timeline {
                flex-direction: column;
            }
            
            .timeline::before {
                display: none;
            }
            
            .timeline-item {
                width: 100%;
                margin-bottom: 30px;
                text-align: left;
                display: flex;
                align-items: flex-start;
            }
            
            .timeline-dot {
                margin: 0 15px 0 0;
                flex-shrink: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Análisis Espectro-Espacial de la Difracción en el Borde Lunar durante Eclipses Solares</h1>
            <p class="subtitle">Simulaciones mediante Transformada de Fourier y Validación Observacional para el Eclipse Total del 12 de Agosto de 2026</p>
            <p class="investigator">Investigador Principal: <strong>Prof. Ángel Chacín Ávila</strong>, Licenciado en Física, Especialista en Ciencias Computacionales, UNES Núcleo Zulia</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" onclick="openSection('introduction')">Introducción</div>
            <div class="tab" onclick="openSection('objectives')">Objetivos</div>
            <div class="tab" onclick="openSection('methodology')">Metodología</div>
            <div class="tab" onclick="openSection('simulations')">Simulaciones</div>
            <div class="tab" onclick="openSection('applications')">Aplicaciones</div>
        </div>
        
        <div class="content">
            <!-- Introducción -->
            <div id="introduction" class="section active">
                <h2>Planteamiento del Problema</h2>
                <p>La difracción de la luz solar en el borde topográficamente complejo de la Luna durante eclipses totales genera patrones de interferencia que no han sido medidos experimentalmente con suficiente resolución espacial/espectral. Los modelos existentes asumen bordes lunares "lisos", ignorando irregularidades (~2-5 km de desnivel) que modifican sustancialmente los patrones de difracción.</p>
                
                <h3>Justificación de la Investigación</h3>
                <div class="card-container">
                    <div class="card">
                        <h4>Relevancia Científica</h4>
                        <p>Por primera vez, se contrastarán simulaciones basadas en TF con datos observacionales de alta resolución, usando la topografía real de la Luna (datos LRO). Las desviaciones entre patrones simulados y observados revelarán cómo la rugosidad del limbo lunar afecta la difracción.</p>
                    </div>
                    <div class="card">
                        <h4>Innovación Metodológica</h4>
                        <p>Desarrollo de un pipeline de análisis FFT adaptado a astronomía observacional, combinando imágenes multiespectrales (RGB, H-α), modelado 3D del limbo lunar y técnicas de supresión de ruido atmosférico.</p>
                    </div>
                    <div class="card">
                        <h4>Oportunidad Única</h4>
                        <p>El eclipse total del 12 de agosto de 2026 sobre España ofrece condiciones excepcionales: franja de totalidad ancha (>100 km) y baja altitud solar (~55°), maximizando la visibilidad de patrones de difracción.</p>
                    </div>
                </div>
                
                <h3>Ecuación Fundamental</h3>
                <div class="math-equation">
                    \[ U(x,y) = \frac{e^{ikz}}{i\lambda z} \iint_{-\infty}^{\infty} t(\xi,\eta)  e^{-i \frac{2\pi}{\lambda z} (x\xi + y\eta)}  d\xi  d\eta \]
                    <p>Campo eléctrico difractado en función de la transmisión en el plano lunar</p>
                </div>
            </div>
            
            <!-- Objetivos -->
            <div id="objectives" class="section">
                <h2>Objetivos de la Investigación</h2>
                
                <h3>Objetivo General</h3>
                <p>Caracterizar cuantitativamente los patrones de difracción producidos por el borde lunar durante el eclipse total de sol del 12 de agosto de 2026 mediante técnicas de transformada de Fourier, integrando simulaciones computacionales con observaciones de alta resolución para validar modelos ópticos avanzados.</p>
                
                <h3>Objetivos Específicos</h3>
                <ol>
                    <li>Desarrollar un modelo computacional basado en transformada de Fourier que simule los patrones de difracción considerando la topografía real del limbo lunar obtenida de los datos LRO (Lunar Reconnaissance Orbiter).</li>
                    <li>Implementar algoritmos de procesamiento de imágenes en Python y Scilab para analizar datos observacionales del eclipse, extrayendo patrones de difracción con resolución espacial y espectral.</li>
                    <li>Establecer una correlación cuantitativa entre las simulaciones numéricas (Fortran/Python) y los datos experimentales mediante técnicas de Monte Carlo para evaluar la significancia estadística de las desviaciones.</li>
                    <li>Cuantificar el impacto de la turbulencia atmosférica en la distorsión de los patrones de difracción mediante simulaciones de Monte Carlo que modelen diferentes condiciones de seeing.</li>
                    <li>Desarrollar algoritmos derivados del análisis de difracción lunar con potencial aplicación en optimización de redes de comunicación óptica terrestres y satelitales.</li>
                </ol>
                
                <h3>Herramientas Computacionales</h3>
                <div class="card-container">
                    <div class="card">
                        <h4>Python</h4>
                        <p>Para procesamiento de imágenes, análisis de datos y visualización usando librerías como NumPy, SciPy, OpenCV y Matplotlib.</p>
                    </div>
                    <div class="card">
                        <h4>Fortran</h4>
                        <p>Para simulaciones numéricas de alto rendimiento, especialmente en cálculos intensivos de transformada de Fourier.</p>
                    </div>
                    <div class="card">
                        <h4>Scilab</h4>
                        <p>Para prototipado rápido de algoritmos y análisis de señales durante las fases iniciales de investigación.</p>
                    </div>
                    <div class="card">
                        <h4>Monte Carlo</h4>
                        <p>Para evaluar incertidumbres y validación estadística de resultados mediante simulación de múltiples escenarios.</p>
                    </div>
                </div>
            </div>
            
            <!-- Metodología -->
            <div id="methodology" class="section">
                <h2>Metodología de Investigación</h2>
                
                <h3>Fases del Proyecto</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div>
                            <div class="timeline-date">Ene - Jun 2025</div>
                            <div>Desarrollo de modelos computacionales en Fortran y Python</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div>
                            <div class="timeline-date">Jul - Dic 2025</div>
                            <div>Calibración de equipos y pruebas preliminares</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div>
                            <div class="timeline-date">Ago 2026</div>
                            <div>Observación del eclipse en España</div>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div>
                            <div class="timeline-date">Sep 2026 - Jun 2027</div>
                            <div>Análisis de datos y desarrollo de aplicaciones</div>
                        </div>
                    </div>
                </div>
                
                <h3>Metodología Detallada</h3>
                <ol>
                    <li><strong>Adquisición de datos topográficos lunares:</strong> Uso de datos del Lunar Reconnaissance Orbiter (LRO) para modelar con precisión el perfil del limbo lunar.</li>
                    <li><strong>Simulación numérica:</strong> Implementación de algoritmos de Transformada Rápida de Fourier (FFT) en Fortran y Python para predecir patrones de difracción.</li>
                    <li><strong>Diseño experimental:</strong> Configuración de telescopios con cámaras CCD de alta resolución y fotómetros de precisión para capturar el eclipse.</li>
                    <li><strong>Procesamiento de imágenes:</strong> Desarrollo de algoritmos en Python para:
                        <ul>
                            <li>Corrección atmosférica</li>
                            <li>Extracción de patrones de difracción</li>
                            <li>Análisis espectral</li>
                        </ul>
                    </li>
                    <li><strong>Validación estadística:</strong> Uso de métodos de Monte Carlo en Scilab para evaluar significancia de resultados.</li>
                    <li><strong>Desarrollo de aplicaciones:</strong> Adaptación de algoritmos para optimización de sistemas de telecomunicaciones.</li>
                </ol>
                
                <h3>Código de Ejemplo: Transformada de Fourier en Python</h3>
                <div class="code-block">
import numpy as np
import matplotlib.pyplot as plt
from scipy.fft import fft2, fftshift

# Cargar topografía lunar (datos LRO)
# topografia = np.load('lunar_topography.npy')

# Crear función de transmisión (ejemplo sintético)
N = 1024  # Resolución
xi, eta = np.meshgrid(np.linspace(-100, 100, N), np.linspace(-100, 100, N))
t = np.heaviside(0.5*xi**2 + eta**2 - 15**2, 1)  # Borde circular con irregularidades

# Aplicar Transformada de Fourier 2D
U = fftshift(fft2(t))
I = np.abs(U)**2  # Intensidad

# Visualización
plt.figure(figsize=(12, 6))
plt.subplot(121)
plt.imshow(t, cmap='gray', extent=[-100,100,-100,100])
plt.title("Función de Transmisión Lunar")
plt.xlabel("ξ (km)")
plt.ylabel("η (km)")

plt.subplot(122)
plt.imshow(np.log(I + 1e-10), cmap='inferno', extent=[-100,100,-100,100])
plt.title("Patrón de Difracción Simulado")
plt.xlabel("x (km)")
plt.ylabel("y (km)")
plt.colorbar(label='log(Intensidad)')
plt.tight_layout()
plt.savefig('difraccion_simulada.png', dpi=300)
plt.show()
                </div>
            </div>
            
            <!-- Simulaciones -->
            <div id="simulations" class="section">
                <h2>Simulaciones Numéricas</h2>
                
                <div class="simulation-container">
                    <h3>Simulador de Patrones de Difracción</h3>
                    <p>Interactúa con los parámetros para ver cómo afectan al patrón de difracción:</p>
                    
                    <div class="controls">
                        <div>
                            <label for="roughness">Rugosidad Lunar: </label>
                            <input type="range" id="roughness" min="0" max="100" value="30">
                            <span id="roughness-value">30%</span>
                        </div>
                        <div>
                            <label for="wavelength">Longitud de Onda (nm): </label>
                            <input type="range" id="wavelength" min="400" max="700" value="550">
                            <span id="wavelength-value">550 nm</span>
                        </div>
                        <button onclick="updateSimulation()">Actualizar Simulación</button>
                    </div>
                    
                    <canvas id="diffractionCanvas" width="600" height="300"></canvas>
                </div>
                
                <h3>Simulación Monte Carlo para Análisis de Incertidumbre</h3>
                <p>Implementación de método de Monte Carlo en Scilab para evaluar la influencia de la turbulencia atmosférica:</p>
                <div class="code-block">
// Código Scilab para simulación Monte Carlo
function I = simulate_diffraction(roughness, wavelength, turbulence)
    // Parámetros base
    k = 2*%pi / (wavelength * 1e-9);
    z = 384400e3; // Distancia Tierra-Luna
    
    // Generar perfil lunar con rugosidad
    N = 512;
    profile = grand(N, N, "nor", 0, roughness);
    t = 1 * (profile > 0.5); // Función de transmisión
    
    // Aplicar FFT
    U = fft2(t);
    
    // Aplicar efecto de turbulencia atmosférica
    if turbulence > 0 then
        phase_distortion = turbulence * grand(N, N, "nor", 0, 1);
        U = U .* exp(%i * phase_distortion);
    end
    
    I = abs(U).^2;
endfunction

// Ejecutar múltiples simulaciones
num_simulations = 1000;
results = zeros(512, 512);
roughness = 0.3; // Nivel de rugosidad
turbulence = 0.2; // Nivel de turbulencia

for i = 1:num_simulations
    I = simulate_diffraction(roughness, 550, turbulence);
    results = results + I;
end

results = results / num_simulations; // Promedio de Monte Carlo

// Visualizar resultados
imshow(results, []);
                </div>
            </div>
            
            <!-- Aplicaciones -->
            <div id="applications" class="section">
                <h2>Aplicaciones en Tecnología de Telecomunicaciones</h2>
                
                <h3>Potencial Disruptivo en Comunicaciones</h3>
                <div class="card-container">
                    <div class="card">
                        <h4>Enlaces Ópticos Libres (FSO)</h4>
                        <p>Los algoritmos desarrollados permitirán predecir pérdidas por difracción en obstáculos irregulares, mejorando el diseño de redes FSO urbanas con ganancias de eficiencia estimadas del 15-30%.</p>
                    </div>
                    <div class="card">
                        <h4>Comunicaciones Satélite-Tierra</h4>
                        <p>Modelos validados mejorarán la robustez de receptores ópticos durante eventos astronómicos críticos, con potencial reducción del 40% en errores de transmisión durante eclipses.</p>
                    </div>
                    <div class="card">
                        <h4>Antenas 6G</h4>
                        <p>Técnicas de análisis FFT adaptadas podrían optimizar patrones de haz en entornos complejos, con posible integración en estándares 3GPP Release 21.</p>
                    </div>
                </div>
                
                <h3>Implementación en Telecomunicaciones</h3>
                <div class="code-block">
# Python: Aplicación de algoritmos de difracción a redes FSO
import numpy as np
from scipy.fft import fft2

def calculate_fso_loss(obstacle_profile, wavelength, distance):
    """
    Calcula pérdidas por difracción en enlace FSO
    Parámetros:
        obstacle_profile: Matriz 2D con perfil del obstáculo
        wavelength: Longitud de onda (m)
        distance: Distancia al receptor (m)
    """
    k = 2 * np.pi / wavelength
    
    # Calcular campo difractado
    U_diff = fft2(obstacle_profile)
    
    # Calcular intensidad en receptor
    I_rec = np.abs(U_diff)**2
    
    # Calcular pérdidas en dB
    I_ref = np.max(I_rec)  # Intensidad de referencia (sin obstáculo)
    losses = -10 * np.log10(I_rec / I_ref)
    
    return losses

# Ejemplo: Perfil de edificio
building_profile = np.zeros((256, 256))
building_profile[100:156, 110:146] = 1  # Obstrucción

# Calcular pérdidas
losses = calculate_fso_loss(building_profile, 1550e-9, 1000)

# Visualizar resultados
plt.imshow(losses, cmap='viridis')
plt.title("Pérdidas por Difracción en Enlace FSO")
plt.colorbar(label='Pérdidas (dB)')
plt.show()
                </div>
                
                <h3>Hoja de Ruta Tecnológica</h3>
                <table style="width:100%; border-collapse: collapse; margin: 25px 0;">
                    <tr style="background: var(--secondary);">
                        <th style="padding: 12px; text-align: left;">Aplicación</th>
                        <th style="padding: 12px; text-align: left;">Indicador de Impacto</th>
                        <th style="padding: 12px; text-align: left;">Plazo</th>
                    </tr>
                    <tr style="background: rgba(255,255,255,0.1);">
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">FSO para redes 5G/6G</td>
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">+15-30% eficiencia en enlaces urbanos</td>
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">2-3 años</td>
                    </tr>
                    <tr style="background: rgba(255,255,255,0.05);">
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">Recepción satelital</td>
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">Reducción del 40% en errores durante eclipses</td>
                        <td style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">4 años</td>
                    </tr>
                    <tr style="background: rgba(255,255,255,0.1);">
                        <td style="padding: 10px;">Antenas 6G</td>
                        <td style="padding: 10px;">Integración en estándares 3GPP Release 21</td>
                        <td style="padding: 10px;">6+ años</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <footer>
            <div class="logo">UNES Núcleo Zulia</div>
            <div>Laboratorio de Óptica y Ciencias Computacionales</div>
            <div>Prof. Ángel Chacín Ávila | Investigación en Óptica Astronómica y Aplicada</div>
            <div>© 2025 - Proyecto de Investigación sobre Difracción Lunar</div>
        </footer>
    </div>

    <script>
        // Función para cambiar entre secciones
        function openSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar la sección seleccionada
            document.getElementById(sectionId).classList.add('active');
            
            // Actualizar pestañas activas
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }
        
        // Inicializar gráfico de simulación
        const canvas = document.getElementById('diffractionCanvas');
        const ctx = canvas.getContext('2d');
        
        function drawDiffraction(roughness, wavelength) {
            const width = canvas.width;
            const height = canvas.height;
            
            // Limpiar canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            // Dibujar patrón de difracción
            const centerX = width / 2;
            const centerY = height / 2;
            
            // Factor de escala basado en parámetros
            const scale = 0.02 + (roughness / 100) * 0.1;
            const waveFactor = 550 / wavelength;
            
            // Dibujar patrones de difracción
            for (let x = 0; x < width; x++) {
                for (let y = 0; y < height; y++) {
                    const dx = (x - centerX) * scale * waveFactor;
                    const dy = (y - centerY) * scale * waveFactor;
                    const distance = Math.sqrt(dx*dx + dy*dy);
                    
                    // Intensidad basada en función de Bessel (simulación simplificada)
                    const intensity = Math.abs(Math.sin(distance * 10) / (distance + 0.1));
                    
                    // Aplicar efecto de rugosidad
                    const noise = (Math.random() - 0.5) * (roughness / 100) * 0.5;
                    const finalIntensity = Math.min(1, Math.max(0, intensity + noise));
                    
                    // Convertir a color (escala de calor)
                    const r = Math.min(255, Math.floor(255 * finalIntensity));
                    const g = Math.min(255, Math.floor(128 * finalIntensity));
                    const b = Math.min(255, Math.floor(64 * (1 - finalIntensity)));
                    
                    ctx.fillStyle = `rgb(${r},${g},${b})`;
                    ctx.fillRect(x, y, 1, 1);
                }
            }
        }
        
        // Función para actualizar simulación
        function updateSimulation() {
            const roughness = document.getElementById('roughness').value;
            const wavelength = document.getElementById('wavelength').value;
            
            // Actualizar valores mostrados
            document.getElementById('roughness-value').textContent = roughness + '%';
            document.getElementById('wavelength-value').textContent = wavelength + ' nm';
            
            // Dibujar nueva simulación
            drawDiffraction(roughness, wavelength);
        }
        
        // Inicializar simulador
        document.getElementById('roughness').addEventListener('input', updateSimulation);
        document.getElementById('wavelength').addEventListener('input', updateSimulation);
        
        // Dibujar simulación inicial
        updateSimulation();
    </script>
</body>
</html>
