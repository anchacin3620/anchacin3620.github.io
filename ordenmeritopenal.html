<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de Mérito - PNF Investigación Penal UNES Núcleo Zulia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #0d6efd;
            --secondary-color: #6c757d;
            --success-color: #198754;
            --info-color: #0dcaf0;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #004085);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .main-content {
            padding: 2rem 0;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .table {
            margin-bottom: 0;
        }
        
        .table thead th {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }
        
        .table tbody tr:nth-child(even) {
            background-color: rgba(0, 123, 255, 0.05);
        }
        
        .table tbody tr:hover {
            background-color: rgba(0, 123, 255, 0.1);
        }
        
        .position-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .position-1 {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }
        
        .position-2 {
            background: linear-gradient(135deg, #C0C0C0, #808080);
        }
        
        .position-3 {
            background: linear-gradient(135deg, #CD7F32, #8B4513);
        }
        
        .position-default {
            background: linear-gradient(135deg, var(--secondary-color), var(--dark-color));
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        
        .filter-container {
            margin-bottom: 1.5rem;
        }
        
        .chart-container {
            height: 300px;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .table-container {
                font-size: 0.85rem;
            }
            
            .position-badge {
                width: 30px;
                height: 30px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-4 fw-bold">Tabla de Mérito</h1>
                    <p class="lead">PNF de Investigación Penal - UNES Núcleo Zulia</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="d-flex align-items-center justify-content-md-end mt-3 mt-md-0">
                        <i class="bi bi-award-fill fs-1 me-3"></i>
                        <div>
                            <h5 class="mb-0">Top 10</h5>
                            <p class="mb-0">Mejores estudiantes</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Tabla de Mérito - Top 10 Estudiantes</h5>
                        </div>
                        <div class="card-body">
                            <div class="filter-container">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bi bi-search"></i></span>
                                            <input type="text" id="searchInput" class="form-control" placeholder="Buscar por nombre o cédula...">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <select id="environmentFilter" class="form-select">
                                            <option value="">Todos los ambientes</option>
                                            <option value="3">Ambiente 3</option>
                                            <option value="4">Ambiente 4</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="table-container">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Posición</th>
                                            <th>Nombre Completo</th>
                                            <th>Cédula</th>
                                            <th>Calificación Final</th>
                                            <th>Ambiente</th>
                                        </tr>
                                    </thead>
                                    <tbody id="meritTable">
                                        <!-- Table content will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0">Estadísticas</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="environmentChart"></canvas>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Promedio general:</span>
                                    <strong id="averageScore">-</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Calificación más alta:</span>
                                    <strong id="highestScore">-</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Calificación más baja:</span>
                                    <strong id="lowestScore">-</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Resumen Ejecutivo</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Observaciones relevantes:</h6>
                            <ul>
                                <li><strong>Distribución por Ambiente:</strong> Existe una notable concentración de estudiantes con alto rendimiento en el <strong>Ambiente 3</strong>, del cual provienen <strong>7 de los 10 mejores puntajes</strong>. Los 3 restantes pertenecen al Ambiente 4.</li>
                                <li><strong>Empates:</strong> Se observaron varios empates en las calificaciones:
                                    <ul>
                                        <li>En las posiciones 5°, 6° y 7° con 19.00 puntos.</li>
                                        <li>En las posiciones 8°, 9° y 10° con 18.83 puntos.</li>
                                    </ul>
                                    Para resolver estos empates, se priorizó la cantidad de calificaciones sobresalientes (>19 puntos).
                                </li>
                                <li><strong>Rendimiento general:</strong> La calificación más alta obtenida fue de 19.80 puntos, lo que indica un excelente rendimiento académico del grupo de estudiantes analizados.</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>Criterios aplicados:</h6>
                            <ul>
                                <li>Se calculó el promedio general de cada estudiante considerando todas las asignaturas disponibles.</li>
                                <li>Se ordenó a los estudiantes de mayor a menor calificación.</li>
                                <li>En caso de empate, se priorizó:
                                    <ul>
                                        <li>Mayor cantidad de calificaciones sobresalientes (>19 puntos).</li>
                                        <li>Orden alfabético si persistía el empate.</li>
                                    </ul>
                                </li>
                                <li>Se excluyeron estudiantes con calificaciones incompletas o inferiores a 10 puntos en alguna asignatura.</li>
                            </ul>
                            <h6>Nota metodológica:</h6>
                            <p>Para el cálculo del promedio final, se consideraron todas las evaluaciones disponibles para cada estudiante en las diferentes asignaturas, otorgando igual peso a cada materia independientemente del número de evaluaciones contenidas en cada una.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">Elaborado por el Profesor Ángel Chacín Ávila @2025</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Se publica con licencia GPL</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Datos de los estudiantes
        const students = [
            { position: 1, name: "RICHARD ALEJANDRO OSORIO ARAUJO", id: "32341795", score: 19.80, environment: 3 },
            { position: 2, name: "JHOMAIRY GABRIELA ALVAREZ HERNANDEZ", id: "32119655", score: 19.67, environment: 3 },
            { position: 3, name: "ADELEY MARGARITA REYES MUJICA", id: "32069831", score: 19.33, environment: 3 },
            { position: 4, name: "PAULA GISELLE GODOY PETIT", id: "32890605", score: 19.17, environment: 4 },
            { position: 5, name: "ALONDRA VALENTINA PERNIA PEREZ", id: "31996414", score: 19.00, environment: 3 },
            { position: 6, name: "MELANY ANGELICA MONTERO FERNANDEZ", id: "32089421", score: 19.00, environment: 3 },
            { position: 7, name: "NICOLLE CAROLINA MEDINA ACOSTA", id: "32666539", score: 19.00, environment: 3 },
            { position: 8, name: "DIEGO ANDRES GARCIA YNFANTE", id: "32097971", score: 18.83, environment: 3 },
            { position: 9, name: "DANILO JOSE FUENMAYOR MONTERO", id: "32891298", score: 18.83, environment: 4 },
            { position: 10, name: "REISIMAR COROMOTO DOMINGUEZ ALVARADO", id: "33065558", score: 18.83, environment: 4 }
        ];

        // Función para renderizar la tabla
        function renderTable(data) {
            const tableBody = document.getElementById('meritTable');
            tableBody.innerHTML = '';
            
            data.forEach(student => {
                const row = document.createElement('tr');
                
                // Determinar clase para la posición
                let positionClass = 'position-default';
                if (student.position === 1) positionClass = 'position-1';
                else if (student.position === 2) positionClass = 'position-2';
                else if (student.position === 3) positionClass = 'position-3';
                
                row.innerHTML = `
                    <td>
                        <div class="position-badge ${positionClass}">${student.position}°</div>
                    </td>
                    <td>${student.name}</td>
                    <td>${student.id}</td>
                    <td>${student.score.toFixed(2)}</td>
                    <td><span class="badge bg-primary">Ambiente ${student.environment}</span></td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Función para calcular estadísticas
        function calculateStats(data) {
            const scores = data.map(s => s.score);
            const average = scores.reduce((a, b) => a + b, 0) / scores.length;
            const highest = Math.max(...scores);
            const lowest = Math.min(...scores);
            
            document.getElementById('averageScore').textContent = average.toFixed(2);
            document.getElementById('highestScore').textContent = highest.toFixed(2);
            document.getElementById('lowestScore').textContent = lowest.toFixed(2);
        }

        // Función para crear el gráfico de distribución por ambiente
        function createEnvironmentChart() {
            const ctx = document.getElementById('environmentChart').getContext('2d');
            
            // Contar estudiantes por ambiente
            const envCount = {};
            students.forEach(student => {
                envCount[student.environment] = (envCount[student.environment] || 0) + 1;
            });
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(envCount).map(env => `Ambiente ${env}`),
                    datasets: [{
                        data: Object.values(envCount),
                        backgroundColor: [
                            'rgba(13, 110, 253, 0.8)',
                            'rgba(25, 135, 84, 0.8)'
                        ],
                        borderColor: [
                            'rgba(13, 110, 253, 1)',
                            'rgba(25, 135, 84, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: true,
                            text: 'Distribución por Ambiente'
                        }
                    }
                }
            });
        }

        // Función para filtrar datos
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const environmentFilter = document.getElementById('environmentFilter').value;
            
            const filteredData = students.filter(student => {
                const matchesSearch = student.name.toLowerCase().includes(searchTerm) || 
                                     student.id.includes(searchTerm);
                const matchesEnvironment = !environmentFilter || student.environment.toString() === environmentFilter;
                
                return matchesSearch && matchesEnvironment;
            });
            
            renderTable(filteredData);
        }

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            renderTable(students);
            calculateStats(students);
            createEnvironmentChart();
            
            // Event listeners para filtros
            document.getElementById('searchInput').addEventListener('input', filterData);
            document.getElementById('environmentFilter').addEventListener('change', filterData);
        });
    </script>
</body>
</html>
